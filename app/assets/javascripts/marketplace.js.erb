$(function(){

  function searchFliterSort (){
    var search = $('.marketplace-search').val();
    var category = $('#listings').data('categoryId');
    var sortValue = $('#sort_listing option:selected').val();
    var distanceValue = $('#distance_filter option:selected').val();
    $.ajax({
      url: 'ajax_sort',
      type: 'GET',
      dataType: 'script',
      data: {
        search: search,
        category_id: category,
        sort: sortValue,
        distance_filter: distanceValue
      },
    });
  }
  $('.bon-button').on('click', searchFliterSort);

  $('#sort_listing, #distance_filter').on('change', searchFliterSort);

  $('#search').on('keyup', searchFliterSort);
});